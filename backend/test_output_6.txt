=== RUN   TestRegister_Success

2026/02/14 13:59:37 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:43 [35;1mrecord not found
[0m[33m[1.799ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE email = "test.success@example.com" ORDER BY `users`.`id` LIMIT 1

2026/02/14 13:59:37 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:50 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testusersuccess" ORDER BY `users`.`id` LIMIT 1
--- PASS: TestRegister_Success (0.19s)
=== RUN   TestRegister_DuplicateEmail
    auth_handler_test.go:145: First registration failed. Status: 400, Body: {"errors":"Key: 'RegisterRequest.Username' Error:Field validation for 'Username' failed on the 'alphanumunicode' tag","message":"Validation failed","status":"error"}
--- FAIL: TestRegister_DuplicateEmail (0.00s)
=== RUN   TestRegister_DuplicateUsername

2026/02/14 13:59:37 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:43 [35;1mrecord not found
[0m[33m[0.550ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE email = "test.user1@example.com" ORDER BY `users`.`id` LIMIT 1

2026/02/14 13:59:37 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:50 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuserunique" ORDER BY `users`.`id` LIMIT 1

2026/02/14 13:59:37 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:43 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE email = "test.user2@example.com" ORDER BY `users`.`id` LIMIT 1
--- PASS: TestRegister_DuplicateUsername (0.10s)
=== RUN   TestRegister_InvalidEmail
--- PASS: TestRegister_InvalidEmail (0.00s)
=== RUN   TestRegister_InvalidUsername
--- PASS: TestRegister_InvalidUsername (0.00s)
=== RUN   TestRegister_InvalidPassword
--- PASS: TestRegister_InvalidPassword (0.00s)
=== RUN   TestRegister_MissingRequiredFields
=== RUN   TestRegister_MissingRequiredFields/missing_email
=== RUN   TestRegister_MissingRequiredFields/missing_username
=== RUN   TestRegister_MissingRequiredFields/missing_password
--- PASS: TestRegister_MissingRequiredFields (0.00s)
    --- PASS: TestRegister_MissingRequiredFields/missing_email (0.00s)
    --- PASS: TestRegister_MissingRequiredFields/missing_username (0.00s)
    --- PASS: TestRegister_MissingRequiredFields/missing_password (0.00s)
=== RUN   TestRegister_CanLoginAfterRegistration

2026/02/14 13:59:37 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:43 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE email = "test.login@example.com" ORDER BY `users`.`id` LIMIT 1

2026/02/14 13:59:37 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:50 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuserlogin" ORDER BY `users`.`id` LIMIT 1
    auth_handler_test.go:405: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:405
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 403
        	Test:       	TestRegister_CanLoginAfterRegistration
    auth_handler_test.go:409: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:409
        	Error:      	Expected value not to be nil.
        	Test:       	TestRegister_CanLoginAfterRegistration
    auth_handler_test.go:410: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:410
        	Error:      	Should NOT be empty, but was <nil>
        	Test:       	TestRegister_CanLoginAfterRegistration
--- FAIL: TestRegister_CanLoginAfterRegistration (0.09s)
=== RUN   TestRegister_InvalidJSON
--- PASS: TestRegister_InvalidJSON (0.00s)
=== RUN   TestFiberBodyParser
--- PASS: TestFiberBodyParser (0.00s)
=== RUN   TestCreateVisualQuery
--- PASS: TestCreateVisualQuery (0.00s)
=== RUN   TestGetVisualQuery
--- PASS: TestGetVisualQuery (0.00s)
=== RUN   TestGetVisualQuery_NotFound

2026/02/14 13:59:38 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/visual_query_handler.go:145 [35;1mrecord not found
[0m[33m[0.553ms] [34;1m[rows:0][0m SELECT * FROM `visual_queries` WHERE id = "non-existent" AND user_id = "test-user-123" ORDER BY `visual_queries`.`id` LIMIT 1
--- PASS: TestGetVisualQuery_NotFound (0.00s)
=== RUN   TestGetVisualQuery_Unauthorized

2026/02/14 13:59:38 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/visual_query_handler.go:145 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `visual_queries` WHERE id = "test-vq-456" AND user_id = "test-user-123" ORDER BY `visual_queries`.`id` LIMIT 1
--- PASS: TestGetVisualQuery_Unauthorized (0.00s)
=== RUN   TestUpdateVisualQuery
--- PASS: TestUpdateVisualQuery (0.20s)
=== RUN   TestDeleteVisualQuery
--- PASS: TestDeleteVisualQuery (0.01s)
=== RUN   TestGetVisualQueries
--- PASS: TestGetVisualQueries (0.00s)
=== RUN   TestGenerateSQL
--- PASS: TestGenerateSQL (0.00s)
FAIL
FAIL	insight-engine-backend/handlers	1.015s
FAIL
