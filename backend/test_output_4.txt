=== RUN   TestRegister_Success

2026/02/14 12:47:30 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:43 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE email = "test.success@example.com" ORDER BY `users`.`id` LIMIT 1

2026/02/14 12:47:30 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/services/auth_service.go:50 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testusersuccess" ORDER BY `users`.`id` LIMIT 1
--- PASS: TestRegister_Success (0.13s)
=== RUN   TestRegister_DuplicateEmail
    auth_handler_test.go:156: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:156
        	Error:      	Not equal: 
        	            	expected: 409
        	            	actual  : 400
        	Test:       	TestRegister_DuplicateEmail
    auth_handler_test.go:161: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:161
        	Error:      	"Validation failed" does not contain "email already registered"
        	Test:       	TestRegister_DuplicateEmail
--- FAIL: TestRegister_DuplicateEmail (0.00s)
=== RUN   TestRegister_DuplicateUsername
    auth_handler_test.go:201: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:201
        	Error:      	Not equal: 
        	            	expected: 409
        	            	actual  : 400
        	Test:       	TestRegister_DuplicateUsername
    auth_handler_test.go:206: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:206
        	Error:      	"Validation failed" does not contain "username already taken"
        	Test:       	TestRegister_DuplicateUsername
--- FAIL: TestRegister_DuplicateUsername (0.00s)
=== RUN   TestRegister_InvalidEmail
--- PASS: TestRegister_InvalidEmail (0.00s)
=== RUN   TestRegister_InvalidUsername
--- PASS: TestRegister_InvalidUsername (0.00s)
=== RUN   TestRegister_InvalidPassword
--- PASS: TestRegister_InvalidPassword (0.00s)
=== RUN   TestRegister_MissingRequiredFields
=== RUN   TestRegister_MissingRequiredFields/missing_email
=== RUN   TestRegister_MissingRequiredFields/missing_username
=== RUN   TestRegister_MissingRequiredFields/missing_password
--- PASS: TestRegister_MissingRequiredFields (0.00s)
    --- PASS: TestRegister_MissingRequiredFields/missing_email (0.00s)
    --- PASS: TestRegister_MissingRequiredFields/missing_username (0.00s)
    --- PASS: TestRegister_MissingRequiredFields/missing_password (0.00s)
=== RUN   TestRegister_CanLoginAfterRegistration
    auth_handler_test.go:374: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:374
        	Error:      	Not equal: 
        	            	expected: 201
        	            	actual  : 400
        	Test:       	TestRegister_CanLoginAfterRegistration

2026/02/14 12:47:30 [31;1mE:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler.go:244 [35;1mrecord not found
[0m[33m[0.000ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE email = "test.login@example.com" ORDER BY `users`.`id` LIMIT 1
    auth_handler_test.go:387: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:387
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 401
        	Test:       	TestRegister_CanLoginAfterRegistration
    auth_handler_test.go:391: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:391
        	Error:      	Expected value not to be nil.
        	Test:       	TestRegister_CanLoginAfterRegistration
    auth_handler_test.go:392: 
        	Error Trace:	E:/antigraviti google/inside engine/insight-engine-ai-ui/backend/handlers/auth_handler_test.go:392
        	Error:      	Should NOT be empty, but was <nil>
        	Test:       	TestRegister_CanLoginAfterRegistration
--- FAIL: TestRegister_CanLoginAfterRegistration (0.00s)
=== RUN   TestRegister_InvalidJSON
--- PASS: TestRegister_InvalidJSON (0.00s)
=== RUN   TestFiberBodyParser
--- PASS: TestFiberBodyParser (0.00s)
=== RUN   TestCreateVisualQuery
    visual_query_handler_test.go:136: Expected 201 or 400, got 401
--- FAIL: TestCreateVisualQuery (0.00s)
=== RUN   TestGetVisualQuery
    visual_query_handler_test.go:163: Expected 200, got 401
    visual_query_handler_test.go:171: Expected query ID to match
--- FAIL: TestGetVisualQuery (0.00s)
=== RUN   TestGetVisualQuery_NotFound
    visual_query_handler_test.go:187: Expected 404, got 401
--- FAIL: TestGetVisualQuery_NotFound (0.00s)
=== RUN   TestGetVisualQuery_Unauthorized
    visual_query_handler_test.go:214: Expected 403, got 401
--- FAIL: TestGetVisualQuery_Unauthorized (0.00s)
=== RUN   TestUpdateVisualQuery
    visual_query_handler_test.go:250: Expected 200, got 401
    visual_query_handler_test.go:258: Expected name to be updated
--- FAIL: TestUpdateVisualQuery (0.00s)
=== RUN   TestDeleteVisualQuery
    visual_query_handler_test.go:285: Expected 200, got 401
    visual_query_handler_test.go:293: Expected query to be deleted
--- FAIL: TestDeleteVisualQuery (0.00s)
=== RUN   TestGetVisualQueries
    visual_query_handler_test.go:322: Expected 200, got 401
--- FAIL: TestGetVisualQueries (0.00s)
=== RUN   TestGenerateSQL
    visual_query_handler_test.go:384: Expected 200 or 400, got 401
--- FAIL: TestGenerateSQL (0.00s)
FAIL
FAIL	insight-engine-backend/handlers	0.318s
FAIL
