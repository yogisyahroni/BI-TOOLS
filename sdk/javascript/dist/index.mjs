var e=class{constructor(t){this.iframe=null;this.options=t}render(){if(!this.options.container)throw new Error("Container element is required");this.options.container.innerHTML="",this.iframe=document.createElement("iframe");let t=`${this.options.url}/embed/dashboard/${this.options.dashboardId}?token=${this.options.token}`;this.iframe.src=t,this.iframe.style.width=this.options.width||"100%",this.iframe.style.height=this.options.height||"100%",this.iframe.style.border="none",this.iframe.setAttribute("allow","clipboard-write"),this.options.container.appendChild(this.iframe),window.addEventListener("message",this.handleMessage.bind(this))}handleMessage(t){let{type:i,payload:s}=t.data;i==="RESIZE"&&this.iframe&&!this.options.height&&(this.iframe.style.height=`${s.height}px`)}setFilter(t,i){this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage({type:"SET_FILTER",payload:{key:t,value:i}},"*")}destroy(){window.removeEventListener("message",this.handleMessage.bind(this)),this.iframe&&(this.iframe.remove(),this.iframe=null)}};typeof window<"u"&&(window.InsightEmbed=e);export{e as InsightEmbed};
