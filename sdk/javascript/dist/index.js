"use strict";var o=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var l=(i,t)=>{for(var e in t)o(i,e,{get:t[e],enumerable:!0})},m=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of h(t))!d.call(i,s)&&s!==e&&o(i,s,{get:()=>t[s],enumerable:!(n=a(t,s))||n.enumerable});return i};var f=i=>m(o({},"__esModule",{value:!0}),i);var g={};l(g,{InsightEmbed:()=>r});module.exports=f(g);var r=class{constructor(t){this.iframe=null;this.options=t}render(){if(!this.options.container)throw new Error("Container element is required");this.options.container.innerHTML="",this.iframe=document.createElement("iframe");let t=`${this.options.url}/embed/dashboard/${this.options.dashboardId}?token=${this.options.token}`;this.iframe.src=t,this.iframe.style.width=this.options.width||"100%",this.iframe.style.height=this.options.height||"100%",this.iframe.style.border="none",this.iframe.setAttribute("allow","clipboard-write"),this.options.container.appendChild(this.iframe),window.addEventListener("message",this.handleMessage.bind(this))}handleMessage(t){let{type:e,payload:n}=t.data;e==="RESIZE"&&this.iframe&&!this.options.height&&(this.iframe.style.height=`${n.height}px`)}setFilter(t,e){this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage({type:"SET_FILTER",payload:{key:t,value:e}},"*")}destroy(){window.removeEventListener("message",this.handleMessage.bind(this)),this.iframe&&(this.iframe.remove(),this.iframe=null)}};typeof window<"u"&&(window.InsightEmbed=r);0&&(module.exports={InsightEmbed});
